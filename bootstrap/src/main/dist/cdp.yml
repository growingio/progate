app: graphql-gateway
units:
  - name: graphql-gateway
    require:
      jdk: 11
    ports:
      - name: jmx_exporter
        protocol: http
      - name: http
        protocol: http
    command: "{{ app_deploy_dir}}/bin/bootstrap"
    envs:
      JAVA_OPTS: "-Dconfig.path={{ app_deploy_dir}}/conf/gateway.yaml -Dlog4j2.configurationFile={{ app_deploy_dir}}/conf/log4j2.xml"

resources:
  - resource: redis
    name: graphql_gateway

configs:
  - path: conf/gateway.yaml.tpl
  - path: conf/log4j2.xml.tpl
  - path: conf/metrics.yml
