rules:
  - get: /projects/{project}/segments/{segment}
    protocal: gRPC
    endpoint: growing.gateway.SegmentService/GetSegment
    parameter:
      transcoders:
        project: HashId
    response:
      fields:
        - id
        - projectId
        - name
      transcoders:
        - "$.obj1.obj2.id": HashId

  - post: /projects/{project}/segments
    body: segment # 将 body 赋值给 segment 字段，再转发给 rpc
    protocal: gRPC
    endpoint: growing.gateway.SegmentService/GetSegment

    parameter:
      transcoders:
        project: HashId
    request:
      transcoders:
        "$.obj1.obj2.id": HashId

    response:
      fields:
        - id
        - projectId
        - name
      transcoders:
        - "$.obj1.obj2.id": HashId

  - delete: /projects/{project}/segments/{segment}
    protocal: gRPC
    endpoint: growing.gateway.SegmentService/DeleteSegment
    parameter:
      transcoders:
        - project: HashId
        - segment: HashId

  - put: /projects/{project}/segments/{segment}
    body: segment
    protocal: gRPC
    endpoint: growing.gateway.SegmentService/UpdateSegment
    parameter:
      transcoders:
        - project: HashId
        - segment: HashId

    request:
      transcoders:
        - "$.obj1.obj2.id": HashId

    response:
      fields:
        - id
        - projectId
        - name
      transcoders:
        - "$.obj1.obj2.id": HashId